# Пример работы сворачивания групп

## Поведение

### Развернутая группа (expanded)
```
┌────┬──────────┬──────────────────────────────┬─────────────┐
│ ID │   Name   │    Product Info (▼)          │  Inventory  │
│    │          ├──────────┬───────────────────┤             │
│    │          │ Category │  Price            │             │
├────┼──────────┼──────────┼───────────────────┼─────────────┤
│ 1  │ Product1 │Electronics│ $500             │ In Stock    │
└────┴──────────┴──────────┴───────────────────┴─────────────┘
     ↑                      ↑
  Без группы          Группа над своими колонками
```

### Свернутая группа (collapsed)
```
┌────┬──────────┬──────────┬─────────────┐
│ ID │   Name   │ Product  │  Inventory  │
│    │          │ Info (▶) │             │
│    │          ├──────────┤             │
│    │          │ Category │             │
├────┼──────────┼──────────┼─────────────┤
│ 1  │ Product1 │Electronics│ In Stock   │
└────┴──────────┴──────────┴─────────────┘
     ↑                      ↑
  Без группы          Только 1 колонка видна
```

## Ключевые особенности

1. **Заголовок группы всегда виден** - даже когда группа свернута
2. **Правильное позиционирование** - заголовок группы располагается точно над колонками своей группы
3. **Пустые ячейки для негруппированных колонок** - колонки без группы (ID, Name) имеют пустые ячейки в строке заголовков групп
4. **Минимум одна колонка** - при сворачивании остается видимой первая колонка группы
5. **Динамическая ширина заголовка** - colspan заголовка автоматически подстраивается под количество видимых колонок
6. **Индикатор состояния** - иконка показывает развернута группа (▼) или свернута (▶)
7. **Клик по заголовку** - переключает состояние группы
8. **Hover эффект** - заголовок подсвечивается при наведении (если collapsible)

## Конфигурация

Группы определяются прямо в колонках - не нужен отдельный проп `columnGroups`.

### Упрощенный формат (рекомендуется)

```tsx
const columns: ExtendedColumnDef<Product>[] = [
  {
    accessorKey: "id",
    header: "ID",
    // Колонка без группы
  },
  {
    accessorKey: "category",
    header: "Category",
    group: "Product Info",  // Просто строка! collapsible: true, defaultExpanded: true
  },
  {
    accessorKey: "price",
    header: "Price",
    group: "Product Info",  // Та же группа - будут объединены
  },
  {
    accessorKey: "supplier",
    header: "Supplier",
    group: { name: "Additional Info", defaultExpanded: false },  // Свернута по умолчанию
  },
];
```

### Полный формат (для кастомизации)

```tsx
{
  accessorKey: "category",
  header: "Category",
  group: {
    name: "Product Info",
    collapsible: true,        // Можно сворачивать (по умолчанию true)
    defaultExpanded: true,    // По умолчанию развернута (по умолчанию true)
    className: "bg-blue-50",  // Стили заголовка группы
  },
}
```

### Варианты использования

```tsx
// Обычная группа (можно сворачивать, развернута)
group: "My Group"

// Свернута по умолчанию
group: { name: "My Group", defaultExpanded: false }

// Нельзя сворачивать (всегда развернута)
group: { name: "My Group", collapsible: false }

// С кастомными стилями
group: { name: "My Group", className: "bg-blue-50" }
```

**Важно:** Все колонки одной группы должны иметь одинаковые настройки. Используется первое вхождение.

## Демо

Откройте http://localhost:5001/demo/table и попробуйте:
1. Кликнуть на "Product Info" - группа свернется, останется только "Category"
2. Кликнуть снова - группа развернется, появятся все колонки
3. Группа "Additional Info" по умолчанию свернута - видна только первая колонка
